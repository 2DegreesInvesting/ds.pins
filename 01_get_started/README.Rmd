---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Sharing pins on Dropbox

We might share different versions of evolving data as
[pins](https://pins.rstudio.com/) in 2DII's Dropbox.

### Me

I create a folder on Dropbox and publish data into it.

```{r setup, include=FALSE}
library(pastax.data)
library(pins)
library(here)

source(here("01_get_started", "utils.R"))

board <- board_folder(pins_path())

board %>% 
  pin_write(
    x = head(pastax.data::esa_sme), 
    name = "esa_sme",
    type = "qs", 
    title = "Registered SME v1",
    description = "A demo dataset to show how we might share data.",
    metadata = list(source = "https://esastar-emr.sso.esa.int/"),
    versioned = TRUE
  )

board %>% 
  pin_write(
    x = pastax.data::esa_sme, 
    name = "esa_sme",
    type = "qs", 
    title = "Registered SME v2",
    description = "A demo dataset to show how we might share data.",
    metadata = list(source = "https://esastar-emr.sso.esa.int/"),
    versioned = TRUE
  )

board %>% 
  pin_write(
    x = pastax.data::ep_agriculture_livestock, 
    name = "ep_agriculture_livestock",
    type = "qs", 
    title = "Companies in agriculture and livestock",
    description = "A demo dataset to show how we might share data.",
    metadata = list(source = "https://www.europages.co.uk/"),
    versioned = TRUE
  )

example_path <- pins_path()
```

### You

This assumes you have Dropbox in your computer in a location similar to this:

```{r}
example_path
```

Use this [pins](https://pins.rstudio.com/) package and create a board with the
path to the Dropbox folder we share. I also use the tidyverse for convenience.

```{r}
library(tidyverse, warn.conflicts = FALSE)
library(pins)

board <- board_folder(example_path)
```

Read the latest version of a pin.

```{r}
board %>% 
  pin_read("esa_sme")
```

List all pins.

```{r}
board %>% 
  pin_list()
```

Explore the available versions of one specific dataset.

```{r}
versions <- board %>% 
  pin_versions("esa_sme")

versions
```

Explore the metadata for a version of a pin.

```{r}
a_version <- versions %>% 
  slice(2) %>% 
  pull(version)
a_version

board %>% 
  pin_meta("esa_sme", a_version)
```

Read a specific version.

```{r}
board %>% 
  pin_read("esa_sme", a_version)
```
