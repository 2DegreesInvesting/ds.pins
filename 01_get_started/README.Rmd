---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Sharing pins

Use case:

* As a developer I would like to have a way to share with you each version of an
evolving dataset so I can get feedback from you.

* As an analyst you would like to have a way to analyze each version of an
evolving dataset so you can give feedback to me.

We can do this with a pins board in a local folder shared via Dropbox.

### `pin_write()` with defaults

I use `pin_write()` to write data to a shared pins board.

```{r}
library(tidyverse, warn.conflicts = FALSE)
library(pins)

board <- board_folder("~/Dropbox/pins")
data <- head(mtcars)

board %>% 
  pin_write(data, "mtcars")
```

### `pin_read()`

You use `pin_read()` to read data from a shared pins board.

```{r}
library(pins)

board <- board_folder("~/Dropbox/pins")

board %>% 
  pin_read("mtcars")
```

### `pin_write()` with `type = "qs"`

Now I use `type = "qs"` to replace the pin with a faster, smaller version ([qs](https://CRAN.R-project.org/package=qs)).

```{r}
board %>% 
  pin_write(data, "mtcars", type = "qs")
```

The original ".rds" file is gone. It was replaced with the ".qs" version. But
sometimes it's useful to version pins, so that writing to an existing pin does
not replace the existing data, but instead adds a new copy.

### `versioned = TRUE` and `pin_versions()`

I use `versioned = TRUE` to activate versioning.

```{r}
board <- board_folder("~/Dropbox/pins", versioned = TRUE)
```

I can now share multiple versions of the same dataset.

```{r}
new_data <- rownames_to_column(data)

board %>% 
  pin_write(new_data, "mtcars")

board %>% 
  pin_versions("mtcars")
```

### `version`

You can now read a specific `version` of the data.

```{r}
versions <- board %>% 
  pin_versions("mtcars")
versions

board %>%
  pin_read("mtcars", version = versions$version[[1]])

board %>%
  pin_read("mtcars", version = versions$version[[2]])
```

```{r inlclude = FALSE}
# Cleanup
fs::dir_delete("~/Dropbox/pins")
```

